// shared/domain/간지/twelve.ts
// ───────────────────────────────────────────────────────────
// 십이운성 + 십이신살(4가지 변형) 매핑 유틸
//   - getTwelveUnseong(dayStem, branch)
//   - getTwelveShinsalBySettings({ baseBranch, targetBranch, era, gaehwa })
// ───────────────────────────────────────────────────────────
export const EraType = {
    Classic: "고전",
    Modern: "현대",
};
export function getTwelveUnseong(baseDayStem, branch) {
    // 입력은 한글 한 글자(갑/을/병/정/무/기/경/신/임/계,  자/축/…/해)
    const mapping = {
        "갑": { "자": "목욕", "축": "관대", "인": "건록", "묘": "제왕", "진": "쇠", "사": "병", "오": "사", "미": "묘", "신": "절", "유": "태", "술": "양", "해": "장생" },
        "을": { "자": "병", "축": "쇠", "인": "제왕", "묘": "건록", "진": "관대", "사": "목욕", "오": "장생", "미": "양", "신": "태", "유": "절", "술": "묘", "해": "사" },
        "병": { "자": "태", "축": "양", "인": "장생", "묘": "목욕", "진": "관대", "사": "건록", "오": "제왕", "미": "쇠", "신": "병", "유": "사", "술": "묘", "해": "절" },
        "정": { "자": "절", "축": "묘", "인": "사", "묘": "병", "진": "쇠", "사": "제왕", "오": "건록", "미": "관대", "신": "목욕", "유": "장생", "술": "양", "해": "태" },
        "무": { "자": "태", "축": "양", "인": "장생", "묘": "목욕", "진": "관대", "사": "건록", "오": "제왕", "미": "쇠", "신": "병", "유": "사", "술": "묘", "해": "절" },
        "기": { "자": "절", "축": "묘", "인": "사", "묘": "병", "진": "쇠", "사": "제왕", "오": "건록", "미": "관대", "신": "목욕", "유": "장생", "술": "양", "해": "태" },
        "경": { "자": "사", "축": "묘", "인": "절", "묘": "태", "진": "양", "사": "장생", "오": "목욕", "미": "관대", "신": "건록", "유": "제왕", "술": "쇠", "해": "병" },
        "신": { "자": "장생", "축": "양", "인": "태", "묘": "절", "진": "묘", "사": "사", "오": "병", "미": "쇠", "신": "제왕", "유": "건록", "술": "관대", "해": "목욕" },
        "임": { "자": "제왕", "축": "쇠", "인": "병", "묘": "사", "진": "묘", "사": "절", "오": "태", "미": "양", "신": "장생", "유": "목욕", "술": "관대", "해": "건록" },
        "계": { "자": "건록", "축": "관대", "인": "목욕", "묘": "장생", "진": "양", "사": "태", "오": "절", "미": "묘", "신": "사", "유": "병", "술": "쇠", "해": "제왕" }
    };
    const t = mapping[baseDayStem];
    return t ? (t[branch] ?? "") : "";
}
// ───────────── 십이신살 (4변형) ─────────────
// 2-1. 고전 + 개화론
function shinsal_classic_gaehwa(yearBranch, branch) {
    const mapping = {
        "자": { "자": "장성", "축": "반안", "인": "역마", "묘": "육해", "진": "화개", "사": "겁살", "오": "재살", "미": "천살", "신": "지살", "유": "년살", "술": "월살", "해": "망신" },
        "축": { "자": "망신", "축": "장성", "인": "반안", "묘": "역마", "진": "육해", "사": "화개", "오": "겁살", "미": "재살", "신": "천살", "유": "지살", "술": "년살", "해": "월살" },
        "인": { "자": "월살", "축": "망신", "인": "장성", "묘": "반안", "진": "역마", "사": "육해", "오": "화개", "미": "겁살", "신": "재살", "유": "천살", "술": "지살", "해": "년살" },
        "묘": { "자": "년살", "축": "월살", "인": "망신", "묘": "장성", "진": "반안", "사": "역마", "오": "육해", "미": "화개", "신": "겁살", "유": "재살", "술": "천살", "해": "지살" },
        "진": { "자": "지살", "축": "년살", "인": "월살", "묘": "망신", "진": "장성", "사": "반안", "오": "역마", "미": "육해", "신": "화개", "유": "겁살", "술": "재살", "해": "천살" },
        "사": { "자": "천살", "축": "지살", "인": "년살", "묘": "월살", "진": "망신", "사": "장성", "오": "반안", "미": "역마", "신": "육해", "유": "화개", "술": "겁살", "해": "재살" },
        "오": { "자": "재살", "축": "천살", "인": "지살", "묘": "년살", "진": "월살", "사": "망신", "오": "장성", "미": "반안", "신": "역마", "유": "육해", "술": "화개", "해": "겁살" },
        "미": { "자": "겁살", "축": "재살", "인": "천살", "묘": "지살", "진": "년살", "사": "월살", "오": "망신", "미": "장성", "신": "반안", "유": "역마", "술": "육해", "해": "화개" },
        "신": { "자": "화개", "축": "겁살", "인": "재살", "묘": "천살", "진": "지살", "사": "년살", "오": "월살", "미": "망신", "신": "장성", "유": "반안", "술": "역마", "해": "육해" },
        "유": { "자": "육해", "축": "화개", "인": "겁살", "묘": "재살", "진": "천살", "사": "지살", "오": "년살", "미": "월살", "신": "망신", "유": "장성", "술": "반안", "해": "역마" },
        "술": { "자": "역마", "축": "육해", "인": "화개", "묘": "겁살", "진": "재살", "사": "천살", "오": "지살", "미": "년살", "신": "월살", "유": "망신", "술": "장성", "해": "반안" },
        "해": { "자": "반안", "축": "역마", "인": "육해", "묘": "화개", "진": "겁살", "사": "재살", "오": "천살", "미": "지살", "신": "년살", "유": "월살", "술": "망신", "해": "장성" }
    };
    return mapping[yearBranch]?.[branch] ?? "";
}
// 2-2. 고전 + 기존방식(삼합 그룹 기준)
function shinsal_classic_basic(yearBranch, branch) {
    const groupMapping = {
        "해": "묘", "묘": "묘", "미": "묘",
        "인": "오", "오": "오", "술": "오",
        "사": "유", "유": "유", "축": "유",
        "신": "자", "자": "자", "진": "자",
    };
    const mapping = {
        "묘": { "자": "년살", "축": "월살", "인": "망신", "묘": "장성", "진": "반안", "사": "역마", "오": "육해", "미": "화개", "신": "겁살", "유": "재살", "술": "천살", "해": "지살" },
        "오": { "자": "재살", "축": "천살", "인": "지살", "묘": "년살", "진": "월살", "사": "망신", "오": "장성", "미": "반안", "신": "역마", "유": "육해", "술": "화개", "해": "겁살" },
        "유": { "자": "육해", "축": "화개", "인": "겁살", "묘": "재살", "진": "천살", "사": "지살", "오": "년살", "미": "월살", "신": "망신", "유": "장성", "술": "반안", "해": "역마" },
        "자": { "자": "장성", "축": "반안", "인": "역마", "묘": "육해", "진": "화개", "사": "겁살", "오": "재살", "미": "천살", "신": "지살", "유": "년살", "술": "월살", "해": "망신" },
    };
    const key = groupMapping[yearBranch];
    return (key && mapping[key]) ? (mapping[key][branch] ?? "") : "";
}
// 2-3. 현대 + 개화론
function shinsal_modern_gaehwa(yearBranch, branch) {
    const mapping = {
        "자": { "자": "장성", "축": "반안", "인": "역마", "묘": "육액", "진": "화개", "사": "겁살", "오": "재살", "미": "천살", "신": "지살", "유": "도화", "술": "월살", "해": "망신" },
        "축": { "자": "망신", "축": "장성", "인": "반안", "묘": "역마", "진": "육액", "사": "화개", "오": "겁살", "미": "재살", "신": "천살", "유": "지살", "술": "도화", "해": "월살" },
        "인": { "자": "월살", "축": "망신", "인": "장성", "묘": "반안", "진": "역마", "사": "육액", "오": "화개", "미": "겁살", "신": "재살", "유": "천살", "술": "지살", "해": "도화" },
        "묘": { "자": "도화", "축": "월살", "인": "망신", "묘": "장성", "진": "반안", "사": "역마", "오": "육액", "미": "화개", "신": "겁살", "유": "재살", "술": "천살", "해": "지살" },
        "진": { "자": "지살", "축": "도화", "인": "월살", "묘": "망신", "진": "장성", "사": "반안", "오": "역마", "미": "육액", "신": "화개", "유": "겁살", "술": "재살", "해": "천살" },
        "사": { "자": "천살", "축": "지살", "인": "도화", "묘": "월살", "진": "망신", "사": "장성", "오": "반안", "미": "역마", "신": "육액", "유": "화개", "술": "겁살", "해": "재살" },
        "오": { "자": "재살", "축": "천살", "인": "지살", "묘": "도화", "진": "월살", "사": "망신", "오": "장성", "미": "반안", "신": "역마", "유": "육액", "술": "화개", "해": "겁살" },
        "미": { "자": "겁살", "축": "재살", "인": "천살", "묘": "지살", "진": "도화", "사": "월살", "오": "망신", "미": "장성", "신": "반안", "유": "역마", "술": "육액", "해": "화개" },
        "신": { "자": "화개", "축": "겁살", "인": "재살", "묘": "천살", "진": "지살", "사": "도화", "오": "월살", "미": "망신", "신": "장성", "유": "반안", "술": "역마", "해": "육액" },
        "유": { "자": "육액", "축": "화개", "인": "겁살", "묘": "재살", "진": "천살", "사": "지살", "오": "도화", "미": "월살", "신": "망신", "유": "장성", "술": "반안", "해": "역마" },
        "술": { "자": "역마", "축": "육액", "인": "화개", "묘": "겁살", "진": "재살", "사": "천살", "오": "지살", "미": "도화", "신": "월살", "유": "망신", "술": "장성", "해": "반안" },
        "해": { "자": "반안", "축": "역마", "인": "육액", "묘": "화개", "진": "겁살", "사": "재살", "오": "천살", "미": "지살", "신": "도화", "유": "월살", "술": "망신", "해": "장성" }
    };
    return mapping[yearBranch]?.[branch] ?? "";
}
// 2-4. 현대 + 기본방식(삼합 그룹 기준)
function shinsal_modern_basic(yearBranch, branch) {
    const groupMapping = {
        "해": "묘", "묘": "묘", "미": "묘",
        "인": "오", "오": "오", "술": "오",
        "사": "유", "유": "유", "축": "유",
        "신": "자", "자": "자", "진": "자",
    };
    const mapping = {
        "묘": { "자": "도화", "축": "월살", "인": "망신", "묘": "장성", "진": "반안", "사": "역마", "오": "육액", "미": "화개", "신": "겁살", "유": "재살", "술": "천살", "해": "지살" },
        "오": { "자": "재살", "축": "천살", "인": "지살", "묘": "도화", "진": "월살", "사": "망신", "오": "장성", "미": "반안", "신": "역마", "유": "육액", "술": "화개", "해": "겁살" },
        "유": { "자": "육액", "축": "화개", "인": "겁살", "묘": "재살", "진": "천살", "사": "지살", "오": "도화", "미": "월살", "신": "망신", "유": "장성", "술": "반안", "해": "역마" },
        "자": { "자": "장성", "축": "반안", "인": "역마", "묘": "육액", "진": "화개", "사": "겁살", "오": "재살", "미": "천살", "신": "지살", "유": "도화", "술": "월살", "해": "망신" },
    };
    const key = groupMapping[yearBranch];
    return (key && mapping[key]) ? (mapping[key][branch] ?? "") : "";
}
export function getTwelveShinsalBySettings(params) {
    const { baseBranch, targetBranch, era, gaehwa } = params;
    if (!baseBranch || !targetBranch)
        return "";
    if (era === "고전") {
        return gaehwa
            ? shinsal_classic_gaehwa(baseBranch, targetBranch)
            : shinsal_classic_basic(baseBranch, targetBranch);
    }
    // era === "현대"
    return gaehwa
        ? shinsal_modern_gaehwa(baseBranch, targetBranch)
        : shinsal_modern_basic(baseBranch, targetBranch);
}
